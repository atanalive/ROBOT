


%C=[0	-259.51	-519.02	-778.53	-863.98	-961.19	-1067.86	-1181.49	-1299.4	-1418.81	-1536.92	-1650.94	-1758.19	-1856.16	-1942.52	-2015.26	-2072.66	-2113.36	-2164.73	-2240.11 -2336.93	-2451.83	-2580.89	-2719.65	-2863.36	-3007.07	-3145.83	-3274.89	-3389.8	-3486.61	-3561.99	-3613.36	-3655.97	-3715.94	-3791.86	-3882	-3984.28	-4096.33	-4215.58	-4339.27 -4464.55	-4588.53	-4708.35	-4821.25	-4924.63	-5016.1	-5101.07	-5195.16	-5297.05	-5405.32	-5518.44	-5634.85	-5752.9	-6317.43	-6881.96	-7446.49	-7569.96	-7690.68	-7805.97	-7913.26 -8010.16	-8094.52	-8164.46	-8218.42	-8255.2	-8273.99	-8274.36	-8256.31	-8092.04	-7927.77	-7763.5	-7742.72	-7727.65	-7718.36	-7714.9	-7712.93	-7710.97	-7709
 %  0	295.43	590.87	886.3	969.71	1039.06	1092.73	1129.45	1148.37	1149.02	1131.4	1095.93	1043.43	975.15	892.68	797.98	693.26	581	446.12	323.05 216.01	128.68	64.06	24.38	11	24.38	64.06	128.68	216.01	323.05	446.12	581	698.82	808.82	908.47	995.48	1067.84	1123.87	1162.3	1182.22 1183.18	1165.17	1128.58	1074.28	1003.51	917.89	835.64	763.99	703.95	656.35	621.88	600.99	594	594	594	594	603.23	630.73	675.88	737.68 814.76	905.39	1007.56	1118.99	1237.22	1359.6	1483.41	1605.91	2337.21	3068.52	3799.83	3905.56	4012.38	4120	4228.1	4618.73	5009.36	5400 ];
C=[0  400  600  500 300 -400  -1300 -1700 -1800 
    0  800 1800 2600 3200 3500  3000  2000  1400  ];
%  C=[-0.1 -0.15 -0.08 0.08 0.15 0.1 
%      0   0.03 0.1  0.1 0.03 0  ]
v1=[0;0];
v2=[0;0];
L=254/2;
%L=0;
NC=length(C); %原始控制点数
RC=[C(:,1)-v1*L,C(:,1),C(:,1)+v1*L,C(:,2:NC-1),C(:,NC)-v2*L,C(:,NC),C(:,NC)+v2*L];

N=length(RC);
t=0:0.01:1;      %归一化时间
s=0:0.01:1;
k=0:0.01:1;
f1s=(1-t).^3/6;  %四个位置样条函数
f2s=(3*t.^3-6*t.^2+4)/6;
f3s=(-3*t.^3+3*t.^2+3*t+1)/6;
f4s=t.^3/6;      
%四个速度样条函数
v1s=-(1-t).^2/2;
v2s=3*t.^2/2-2*t;
v3s=-3*t.^2/2+t+0.5;
v4s=t.^2/2;
%加速度曲线
a1s=1-t;
a2s=3*t-2;
a3s=1-3*t;
a4s=t;

figure(1);
mycolor='mbch';
plot(RC(1,:),RC(2,:),'r*');
hold on;
for i=1:N-3
    P=RC(:,i)*f1s+RC(:,i+1)*f2s+RC(:,i+2)*f3s+RC(:,i+3)*f4s;
    %disp(P);
    plot(P(1,:),P(2,:),mycolor(mod(i,3)+1));
end
title('路径规划位置曲线');
grid on;
hold off;

figure(2);
hold on;
for i=1:N-3
    P=RC(:,i)*f1s+RC(:,i+1)*f2s+RC(:,i+2)*f3s+RC(:,i+3)*f4s;
    V=RC(:,i)*v1s+RC(:,i+1)*v2s+RC(:,i+2)*v3s+RC(:,i+3)*v4s;
    %plot(P(2,:),V(2,:),mycolor(mod(i,3)+1));
   % plot(s,V(2,:)*20,mycolor(mod(i,3)+1));
    plot(s,V(2,:),mycolor(mod(i,3)+1));
    %pos=atan(V(2,:)/V(1,:));
     % plot(s,pos(1,:)*180/2/pi,mycolor(mod(i,3)+1));
    s=s+1;
end
title('路径规划速度曲线');
grid on;
hold off;
figure(3);
hold on;

for i=1:N-3
    P=RC(:,i)*f1s+RC(:,i+1)*f2s+RC(:,i+2)*f3s+RC(:,i+3)*f4s;
   % V=RC(:,i)*v1s+RC(:,i+1)*v2s+RC(:,i+2)*v3s+RC(:,i+3)*v4s;
    A=RC(:,i)*a1s+RC(:,i+1)*a2s+RC(:,i+2)*a3s+RC(:,i+3)*a4s;
    plot(k,A(2,:),mycolor(mod(i,3)+1));
   % plot(k,A(2,:)*20,mycolor(mod(i,3)+1));
    k=k+1;
end
title('路径规划加速度曲线');
hold off;

